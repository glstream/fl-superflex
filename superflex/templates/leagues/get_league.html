{% extends 'base.html' %} {% block header %} {% endblock %} {%block content%}
{% from 'buttons.html' import buttons_large %}
{% from 'tables.html' import power_ranks %}
{% from 'ranks.html' import power_status_ranks %}
{% from 'best_available.html' import ba %}
{% from 'header_page.html' import league_header %}
{% from 'player_cards.html' import player_cards %}
{% from 'table_footer.html' import table_footer %}
<script>
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });

</script>
{{league_header(league_name, avatar)}}
{% if cur_league.previous_league_id is none %}
{% set bt = 'disabled'%}
{%endif%}
<form method="post" class="form-inline">
    <button class="btn btn-outline-secondary" type="submit" name="get_league"
        value="{{session_id,user_id,cur_league.previous_league_id}}" {{bt}}>Load Previous
        Year</button>
</form>
<br>
<h5>
    <span class="badge bg-dark-1">{{cur_league.league_year}}</span>
    {% if cur_league.league_cat == 0 %}
    <span class="badge alert-dark">{{cur_league.league_cat | league_cat}}</span>
    {% endif %}
    {% if cur_league.league_cat == 1 %}
    <span class="badge alert-light">{{cur_league.league_cat | league_cat}}</span>
    {% endif %}
    {% if cur_league.league_cat == 2 %}
    <span class="badge alert-success">{{cur_league.league_cat | league_cat}}</span>
    {% endif %}
    {% if cur_league.total_rosters < 12 %} <span class="badge alert-success">{{cur_league.total_rosters}}
        Team
        </span>
        {% endif %}
        {% if cur_league.total_rosters == 12 %}
        <span class="badge alert-danger">{{cur_league.total_rosters}} Team</span>
        {% endif %}
        {% if cur_league.total_rosters > 12 %}
        <span class="badge alert-light">{{cur_league.total_rosters}} Team</span>
        {% endif %}
        {% if cur_league.qb_cnt + cur_league.sf_cnt > 1 %}
        <span class="badge alert-secondary">Superflex</span>
        {% else %}
        <span class="badge alert-primary">Single QB</span>
        {% endif %}

        <span class="badge bg-warning">{{cur_league.starter_cnt}} Starters</span>

</h5>
<br>
<div class="row justify-content-center">
    {{power_status_ranks(owners, pct_values, 'Power Rankings', league_id, session_id,'get_league_ktc')}}
    <div class="col-auto" style="width: 65em;">
        {{buttons_large(session_id, user_id, league_id, ktc_button='disabled')}}
        <br>
        <div class="col-auto" style="width:65em; margin-right: 50px;">
            {{power_ranks(owners, user_id, league_id, session_id,'get_league_ktc')}}
            <br>
            {{table_footer('KeepTradeCut Player Values', update_diff_minutes)}}
        </div>
    </div>
    <div class="col-auto" style="margin-top: 90px;">
        <canvas id="myChart" width="300" height="300"></canvas>
        <script>
            try {
                const ctx = document.getElementById('myChart').getContext('2d');
                const myChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['QB', 'RB', 'WR', 'TE', 'Picks', 'Starters', 'Bench'],
                        datasets: [{
                            label: '{{page_user[0][0]}}',
                            data: ['{{page_user[0][1]}}', '{{page_user[0][2]}}', '{{page_user[0][3]}}', '{{page_user[0][4]}}', '{{page_user[0][5]}}', '{{page_user[0][6]}}', '{{page_user[0][7]}}'],
                            backgroundColor: 'rgb(39, 125, 161,.7)',
                            borderColor: 'rgb(249, 199, 79, 0.7)',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        plugins: {
                            tooltip: {
                                bodyColor: '#F9C74F'
                            }
                        },

                        scales: {

                            r: {
                                reverse: true,
                                max: {{ total_rosters }},
            min: 1,
                beginAtZero: false,

                    ticks: {
                stepSize: 3,
                    display: true,
                        font: {
                    size: 12
                }
            },
            pointLabels: {
                display: true
            },
        
        
                                },
                            },
            responsive: false,
        
                        }
                    });
            } catch (e) {

            }
        </script>
    </div>
    {{ba(best_available)}}
</div>
<br>

<div> <a class="btn btn-secondary" data-toggle="collapse" data-target=".multi-collapse" aria-expanded="false"
        aria-controls="collapseExample">Expand all teams</a>
</div>

<br>
<div class="row justify-content-center">
    {{ player_cards(owners, users, aps, league_id, session_id, 'ktc', 'get_league_ktc') }}
</div>
{% endblock %}