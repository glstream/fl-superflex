{% extends 'base.html' %} {% block header %} {% endblock %} {%block content%}
<!-- DataTables CSS -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">
<!-- DataTables JS -->
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
<script>

    $(document).ready(function () {
        var table = $('#player-values-table').DataTable({
            order: [[4, 'desc']], info: false, pageLength: 50,
        });


        $('#player-values-table').DataTable().column(6).search('sf_value').draw();


        $('#toggle-checkbox').on('click', function () {
            var isChecked = $(this).prop('checked');
            if (isChecked) {
                table.column(6).search('sf_value').draw(); // Change index to match your data
                table.rows().nodes().each(function (row) {
                    if ($(row).find('td:eq(6)').text() != 'sf_value') {
                        $(row).toggle(false);
                    }
                });
            } else {
                table.column(6).search('one_qb_value').draw(); // Change index to match your data
                table.rows().nodes().each(function (row) {
                    if ($(row).find('td:eq(6)').text() == 'one_qb_value') {
                        $(row).toggle(true);
                    }
                });
            }
        });
    });
</script>
<label class="switch">
    <input type="checkbox" id="toggle-checkbox" checked>Superflex
    <span class="slider"></span>
</label>


<div class="styled-table">
    <table class="table table-striped table-hover" style="width:85%;font-size: 14px;" id="player-values-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Position</th>
                <th>Team</th>
                <th>Age </th>
                <th>Value</th>
                <th>Rank</th>
                <th class="hidden">Rank Type</th>
            </tr>
        </thead>
        <tbody>
            {% for player in players %}
            <tr>
                <td>{{ player.player_full_name }}</td>
                <td>{{ player.position }}</td>
                <td>{{ player.team }}</td>
                <td>{{ player.age }}</td>
                <td>{{ player.value }}</td>
                <td>{{ player.rank or '-' }}</td>
                <td class="hidden">{{ player.rank_type }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}